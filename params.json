{"name":"Cakephp-sorting","tagline":"","body":"# CakePHP-sorting\r\n\r\n\r\n####View/Users/index.ctp\r\n\r\n\r\n```html\r\n<script src=\"<?php echo HTTP_ROOT.'js/jquery-1.7.2.min.js';?>\"></script>\r\n<script>    \r\n$(document).ready(function()\r\n\t{\r\n\t\t$(\"#test-list\").sortable({\r\n\t\t  handle : '.handle_left',\r\n\t\t  update : function () {\r\n\r\n                var order = $('#test-list').sortable('serialize');\r\n\t\t\t$.post(\"users/sorting\", order, function(theResponse){\r\n\r\n\t\t\t}); \t\r\n        \r\n\t\t  }\r\n\t\t});\r\n\t});\r\n </script>\r\n <script src=\"<?php echo HTTP_ROOT.'js/jquery-ui-1.8.21.custom.min.js';?>\"></script>\r\n```\r\n\r\nN.B - `HTTP_ROOT` i have defined Config/boatstrap.php file. \r\n\r\n\r\n    define('HTTP_ROOT','your_site_path');\r\n    \r\n    \r\n\r\n```html\r\n<tbody id=\"test-list\">\r\n  <?php foreach($getUser as $user){?>\r\n  <tr id=\"listItem_<?php echo $user['User']['id'];?>\">\r\n     <td><span style=\"cursor:move;\"><img src=\"img/arrow.png\" alt=\"\" /></span></td>\r\n     <td><?php echo $user['User']['username'];?></td>\r\n  </tr>\r\n  <?php }?>\r\n<tbody>\r\n```\r\n\r\n\r\n    \r\n####Controller\r\n   \r\n   \r\n    public function index() {\r\n        $condition=array('order' => array('User.sl_no ASC'));\r\n        $this->set('getUser', $this->User->find('all',$condition));\r\n    }\r\n   \r\n    public function sorting() {\r\n        $this->layout = 'ajax';         \r\n        $array = $_REQUEST['listItem'];\r\n  \t\t  $count = 1;\r\n  \t\t  foreach ($array as $idval) {            \r\n  \t\t\t  $this->User->updateAll(array('sl_no' => $count), array('User.id' => $idval)); \r\n  \t\t\t  $count ++; \r\n  \t\t  } \r\n        exit;\r\n    }\r\n\r\n\r\n####Image\r\n\r\n![image1](https://raw.githubusercontent.com/CakePHP-Script/CakePHP-sorting/master/webroot/img/arrow.png)\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}